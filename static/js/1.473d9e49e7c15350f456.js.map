{"version":3,"sources":["webpack:///src/pages/Users.vue","webpack:///./src/pages/Users.vue?703f","webpack:///./src/pages/Users.vue"],"names":["Users","loading","limit","currentPage","page","currentLimit","usersCount","_this","this","data","_this2","id","loadUsers","mobileMenuOpened","pages_Users","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","class","_clicked","on","click","openMobileMenu","_opened","attrs","current-limit","count","model","value","callback","$$v","expression","_e","to","name","users","deleteUser","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uJAwDAA,QAEA,0TAUA,mBACA,WACA,oBAEA,uEAIAC,wEAGAC,qDAIAC,+DAGAC,oDAKAC,iEAGAH,wEAIAI,kBACAA,0BAIA,iBAEA,2CAEA,IAAAC,EAAAC,mBACA,wEAGAC,mCACA,qCACA,aACA,wCAEA,aACA,uCAKA,IAAAC,EAAAF,iBACAG,mCAEAC,+BACA,wCAEA,2DAIAC,2CAIAD,cCrIAE,GADiBC,OAFjB,WAA0B,IAAAC,EAAAR,KAAaS,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,yBAAmCF,EAAA,OAAYE,YAAA,iBAA2BL,EAAAM,GAAA,8BAAAN,EAAAM,GAAA,KAAAH,EAAA,OAA6DE,YAAA,iBAA2BL,EAAAM,GAAA,mBAAAN,EAAAO,GAAAP,EAAAV,YAAA,YAAAU,EAAAM,GAAA,KAAAH,EAAA,UAAwFE,YAAA,mBAAAG,OAAsCC,SAAAT,EAAAH,kBAAiCa,IAAKC,MAAAX,EAAAY,oBAA4BZ,EAAAM,GAAA,KAAAH,EAAA,OAA0BE,YAAA,OAAAG,OAA0BK,QAAAb,EAAAH,oBAAiCG,EAAA,WAAAG,EAAA,cAAoCE,YAAA,aAAAS,OAAgCC,gBAAAf,EAAAd,MAAA8B,MAAAhB,EAAAV,YAAiD2B,OAAQC,MAAAlB,EAAA,MAAAmB,SAAA,SAAAC,GAA2CpB,EAAAd,MAAAkC,GAAcC,WAAA,WAAqBrB,EAAAsB,KAAAtB,EAAAM,GAAA,KAAAH,EAAA,eAAyCE,YAAA,4BAAAS,OAA+CS,IAAMC,KAAA,cAAkBxB,EAAAM,GAAA,4BAAAN,EAAAM,GAAA,KAAAH,EAAA,eAAmEE,YAAA,gCAAAS,OAAmDS,IAAMC,KAAA,aAAiBxB,EAAAM,GAAA,oCAAAN,EAAAM,GAAA,KAAAH,EAAA,cAA0EW,OAAOE,MAAAhB,EAAAV,WAAAJ,MAAAc,EAAAd,OAAyC+B,OAAQC,MAAAlB,EAAA,KAAAmB,SAAA,SAAAC,GAA0CpB,EAAAZ,KAAAgC,GAAaC,WAAA,UAAoBrB,EAAAM,GAAA,KAAAN,EAAA,gBAAAG,EAAA,OAA8CE,YAAA,UAAoBL,EAAAM,GAAA,oEAAAN,EAAAsB,KAAAtB,EAAAM,GAAA,KAAAH,EAAA,cAAmHW,OAAOU,KAAA,UAAexB,EAAA,QAAAG,EAAA,UAAAH,EAAAsB,MAAA,GAAAtB,EAAAM,GAAA,KAAAH,EAAA,cAAuEW,OAAOU,KAAA,UAAexB,EAAA,cAAAG,EAAA,cAAuCW,OAAOW,MAAAzB,EAAAyB,OAAkBf,IAAKgB,WAAA1B,EAAA0B,cAA6B1B,EAAAsB,MAAA,QAE/kDK,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA9C,EACAc,GATA,EAVA,SAAAiC,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/1.473d9e49e7c15350f456.js","sourcesContent":["<template>\n  <div class=\"users\">\n    <div class=\"users__header header\">\n      <div class=\"users__title\">\n        Users List\n      </div>\n      <div class=\"users__count\">\n        Total : {{ usersCount }}\n      </div>\n      <button class=\"mobile-menu-icon\"\n              :class=\"{'_clicked': mobileMenuOpened}\"\n              @click=\"openMobileMenu\"/>\n    </div>\n\n    <div class=\"menu\" :class=\"{'_opened': mobileMenuOpened}\">\n      <limitation class=\"limitation\"\n                  v-if=\"usersCount\"\n                  v-model=\"limit\"\n                  :current-limit=\"limit\"\n                  :count=\"usersCount\"\n      />\n      <router-link class=\"users__link new-user-link\" :to=\"{name: 'NewUser'}\">\n        New User\n      </router-link>\n      <router-link class=\"users__link change-theme-link\" :to=\"{name: 'Themes'}\">\n        Change Theme\n      </router-link>\n    </div>\n\n    <pagination\n      :count=\"usersCount\"\n      v-model=\"page\"\n      :limit=\"limit\"\n      />\n\n    <div class=\"error\" v-if=\"errorConnection\">\n      No connection to the server. Please try again later.\n    </div>\n\n    <transition name=\"fade\">\n      <loader v-if=\"loading\"/>\n    </transition>\n\n    <transition name=\"fade\">\n      <users-list\n        v-if=\"usersIsLoaded\"\n        :users=\"users\"\n        @deleteUser=\"deleteUser\"/>\n    </transition>\n\n\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n\n  export default {\n    name: 'Users',\n    components: {\n      UsersList: () => import('@/components/UsersList.vue'),\n      Pagination: () => import('@/components/Pagination.vue'),\n      Limitation: () => import('@/components/Limitation.vue'),\n      Loader: () => import('@/components/Loader.vue')\n    },\n    data(){\n      return {\n        users: [],\n        usersCount: 0,\n        errorConnection: false,\n        loading: false,\n        mobileMenuOpened: false\n      }\n    },\n    computed: {\n      usersIsLoaded(){\n        return this.users.length && !this.loading;\n      },\n      url() {\n        return `/users?_page=${this.page}&_limit=${this.limit}`;\n      },\n      page: {\n        get() {\n          return this.$store.state.currentPage;\n        },\n        set(page) {\n          this.$store.dispatch('changePage', page)\n        }\n      },\n      limit: {\n        get() {\n          return this.$store.state.currentLimit;\n        },\n        set(limit) {\n          this.$store.dispatch('changeLimit', limit);\n        }\n      },\n      requestIsJustified() {\n        const adequateParams = (this.limit * (this.page - 1)) < this.usersCount;\n        return adequateParams || !this.usersCount;\n      }\n    },\n    watch: {\n      limit: 'loadUsers',\n      page: 'loadUsers'\n    },\n    methods: {\n      loadUsers(){\n        this.loading = true;\n        if (this.requestIsJustified) {\n          axios.get(this.url).then(res => {\n            this.users = res.data;\n            this.usersCount = Number(res.headers['x-total-count']);\n            this.errorConnection = false;\n            this.loading = false;\n          }).catch(() => {\n            this.errorConnection = true;\n            this.loading = false;\n            this.users = [];\n          })\n        }\n      },\n      deleteUser(id) {\n        const url = `/users/${id}`;\n        axios.delete(url).then(res => {\n          this.loadUsers();\n          this.errorConnection = false;\n        }).catch(() => {\n          this.errorConnection = true;\n        })\n      },\n      openMobileMenu() {\n        this.mobileMenuOpened = !this.mobileMenuOpened;\n      }\n    },\n    created() {\n      this.loadUsers();\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import (less) \"../styles/media\";\n\n  .users {\n    &__header {\n    }\n\n    &__title {\n      margin-right: 80px;\n\n      @media @tablet {\n        margin-right: 0;\n      }\n    }\n\n    &__count {\n      font-size: 20px;\n      line-height: 20px;\n      margin-right: 80px;\n\n      @media @tablet {\n        margin-right: 0;\n      }\n    }\n\n    &__link {\n      color: white;\n      text-decoration: none;\n      word-spacing: 5px;\n      font-size: 17px;\n      position: absolute;\n      cursor: pointer;\n      text-shadow: none;\n      transition: font-size .2s, text-shadow .3s;\n\n      @media @phone-medium {\n        font-size: 20px;\n      }\n\n      &:hover {\n        font-size: 21px;\n        text-shadow: 1px 1px 3px black;\n      }\n    }\n  }\n\n  .limitation {\n    position: absolute;\n    z-index: 2;\n    left: 20px;\n    top: 35px;\n    line-height: 20px;\n    word-spacing: 5px;\n\n    @media @tablet {\n      top: 22px;\n    }\n  }\n\n  .new-user-link {\n    right: 20px;\n    top: 115px;\n\n    @media @tablet {\n      top: 10px\n    }\n\n    &::before {\n      content: '+';\n      font-size: 35px;\n      position: relative;\n      top: 2px;\n    }\n  }\n\n  .change-theme-link {\n    right: 20px;\n    top: 0;\n\n    @media @tablet {\n      top: 80px;\n    }\n\n    &::before {\n      content: '>';\n      font-size: 35px;\n      position: relative;\n      top: 4px;\n    }\n  }\n\n  .error {\n    position: fixed;\n    z-index: 3;\n    bottom: 0;\n    text-align: center;\n    width: 100%;\n    padding: 10px;\n    background: darkgray;\n    color: white;\n    left: 0;\n  }\n\n  .pages-container {\n    z-index: 10;\n  }\n\n  .menu {\n    font-family: 'Cinzel', serif;\n    font-weight: bold;\n    color: white;\n\n    @media @phone-strict {\n      padding-top: 35px;\n      position: relative;\n      max-height: 0;\n      opacity: 0;\n      transition: max-height .5s .5s ease, opacity .5s ease-out;\n      height: 130px;\n      background: rgba(255, 255, 255, 0.3);\n      margin-top: 10px;\n\n      &._opened {\n        max-height: 300px;\n        opacity: 1;\n        transition: max-height .5s ease-out, opacity .5s .5s ease;\n      }\n    }\n  }\n\n  .mobile-menu-icon {\n    height: 50px;\n    width: 50px;\n    background-color: transparent;\n    background-image: url('../assets/menu.svg');\n    background-size: cover;\n    border: none;\n    outline: none;\n    display: block;\n    transition: background 1s ease, transform 1s ease;\n    position: absolute;\n    top: 20px;\n    right: 20px;\n\n    @media @tablet {\n      display: none;\n    }\n\n    &._clicked {\n      background-image: url('../assets/menu_close.svg');\n      transform: rotate(180deg);\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Users.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"users\"},[_c('div',{staticClass:\"users__header header\"},[_c('div',{staticClass:\"users__title\"},[_vm._v(\"\\n      Users List\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"users__count\"},[_vm._v(\"\\n      Total : \"+_vm._s(_vm.usersCount)+\"\\n    \")]),_vm._v(\" \"),_c('button',{staticClass:\"mobile-menu-icon\",class:{'_clicked': _vm.mobileMenuOpened},on:{\"click\":_vm.openMobileMenu}})]),_vm._v(\" \"),_c('div',{staticClass:\"menu\",class:{'_opened': _vm.mobileMenuOpened}},[(_vm.usersCount)?_c('limitation',{staticClass:\"limitation\",attrs:{\"current-limit\":_vm.limit,\"count\":_vm.usersCount},model:{value:(_vm.limit),callback:function ($$v) {_vm.limit=$$v},expression:\"limit\"}}):_vm._e(),_vm._v(\" \"),_c('router-link',{staticClass:\"users__link new-user-link\",attrs:{\"to\":{name: 'NewUser'}}},[_vm._v(\"\\n      New User\\n    \")]),_vm._v(\" \"),_c('router-link',{staticClass:\"users__link change-theme-link\",attrs:{\"to\":{name: 'Themes'}}},[_vm._v(\"\\n      Change Theme\\n    \")])],1),_vm._v(\" \"),_c('pagination',{attrs:{\"count\":_vm.usersCount,\"limit\":_vm.limit},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_vm._v(\" \"),(_vm.errorConnection)?_c('div',{staticClass:\"error\"},[_vm._v(\"\\n    No connection to the server. Please try again later.\\n  \")]):_vm._e(),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.loading)?_c('loader'):_vm._e()],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.usersIsLoaded)?_c('users-list',{attrs:{\"users\":_vm.users},on:{\"deleteUser\":_vm.deleteUser}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-17c9844a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Users.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17c9844a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Users.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Users.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Users.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17c9844a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Users.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Users.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}